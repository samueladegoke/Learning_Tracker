[
    {
        "question_type": "mcq",
        "text": "What is a p-value in hypothesis testing?",
        "options": [
            "The probability the null hypothesis is true",
            "The probability of observing data this extreme if H0 is true",
            "The percentage of correct predictions",
            "The confidence level"
        ],
        "correct_index": 1,
        "difficulty": "medium",
        "topic_tag": "statistics",
        "explanation": "P-value is the probability of observing results as extreme as the data, assuming the null hypothesis is true."
    },
    {
        "question_type": "mcq",
        "text": "At α = 0.05, when do we reject the null hypothesis?",
        "options": [
            "p > 0.05",
            "p < 0.05",
            "p = 0.05",
            "p = 0"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "statistics",
        "explanation": "If p-value < significance level (α), we reject H0 and conclude there's a significant difference."
    },
    {
        "question_type": "mcq",
        "text": "Which scipy function performs an independent samples t-test?",
        "options": [
            "stats.ttest_1samp",
            "stats.ttest_ind",
            "stats.ttest_rel",
            "stats.ttest"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "scipy",
        "explanation": "ttest_ind compares means of two independent (unrelated) groups."
    },
    {
        "question_type": "mcq",
        "text": "What is the null hypothesis in a t-test comparing two means?",
        "options": [
            "The means are different",
            "The means are equal",
            "One mean is larger",
            "The data is normal"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "statistics",
        "explanation": "The null hypothesis typically states there is no difference (means are equal)."
    },
    {
        "question_type": "mcq",
        "text": "When should you use ttest_rel instead of ttest_ind?",
        "options": [
            "For larger samples",
            "For paired/matched data",
            "For non-normal data",
            "For categorical data"
        ],
        "correct_index": 1,
        "difficulty": "medium",
        "topic_tag": "scipy",
        "explanation": "ttest_rel is for paired data (e.g., same subjects measured before and after treatment)."
    },
    {
        "question_type": "mcq",
        "text": "What does a 95% confidence interval mean?",
        "options": [
            "95% of data falls in this range",
            "The true mean is within this range 95% of the time",
            "95% probability the result is correct",
            "The error is 5%"
        ],
        "correct_index": 1,
        "difficulty": "medium",
        "topic_tag": "statistics",
        "explanation": "If we repeated the sampling, 95% of intervals would contain the true population mean."
    },
    {
        "question_type": "mcq",
        "text": "What does stats.sem() calculate?",
        "options": [
            "Standard deviation",
            "Standard error of the mean",
            "Median",
            "Variance"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "scipy",
        "explanation": "SEM (Standard Error of the Mean) measures the precision of the sample mean estimate."
    },
    {
        "question_type": "mcq",
        "text": "Who discovered that handwashing reduces mortality?",
        "options": [
            "Louis Pasteur",
            "Robert Koch",
            "Ignaz Semmelweis",
            "Joseph Lister"
        ],
        "correct_index": 2,
        "difficulty": "easy",
        "topic_tag": "domain",
        "explanation": "Ignaz Semmelweis discovered in 1847 that hand disinfection dramatically reduced childbed fever deaths."
    },
    {
        "question_type": "mcq",
        "text": "Which Seaborn function creates overlapping histograms?",
        "options": [
            "sns.hist()",
            "sns.histplot()",
            "sns.distribution()",
            "sns.overlap()"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "seaborn",
        "explanation": "histplot() creates histograms. Overlapping distributions can be shown with multiple calls or hue parameter."
    },
    {
        "question_type": "mcq",
        "text": "What does kde=True add to a histogram?",
        "options": [
            "Error bars",
            "Kernel Density Estimate curve",
            "Cumulative line",
            "Trend line"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "seaborn",
        "explanation": "KDE adds a smooth curve showing the estimated probability density function."
    },
    {
        "question_type": "mcq",
        "text": "What t-statistic indicates a larger difference between groups?",
        "options": [
            "Close to 0",
            "Large positive or negative value",
            "Exactly 1",
            "Between -1 and 1"
        ],
        "correct_index": 1,
        "difficulty": "medium",
        "topic_tag": "statistics",
        "explanation": "A larger absolute t-statistic indicates a greater difference relative to the variance."
    },
    {
        "question_type": "mcq",
        "text": "What happens if groups have very different variances?",
        "options": [
            "t-test is more accurate",
            "Consider Welch's t-test (equal_var=False)",
            "Use a paired test",
            "Ignore the difference"
        ],
        "correct_index": 1,
        "difficulty": "medium",
        "topic_tag": "statistics",
        "explanation": "Welch's t-test is more robust when variances are unequal."
    },
    {
        "question_type": "coding",
        "text": "Perform a t-test comparing two groups and return the p-value.",
        "starter_code": "from scipy import stats\nimport numpy as np\n\ngroup1 = np.array([10, 12, 14, 16, 18])\ngroup2 = np.array([8, 10, 11, 13, 15])\n\ndef compare_groups(g1, g2):\n    # Return p-value\n    pass",
        "solution": "from scipy import stats\nimport numpy as np\n\ngroup1 = np.array([10, 12, 14, 16, 18])\ngroup2 = np.array([8, 10, 11, 13, 15])\n\ndef compare_groups(g1, g2):\n    t_stat, p_value = stats.ttest_ind(g1, g2)\n    return p_value",
        "test_cases": "pval = compare_groups(group1, group2)\nassert 0 < pval < 1",
        "difficulty": "easy",
        "topic_tag": "scipy"
    },
    {
        "question_type": "coding",
        "text": "Create overlapping histograms for before/after data using Seaborn.",
        "starter_code": "import seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nbefore = np.random.normal(10, 2, 100)\nafter = np.random.normal(5, 2, 100)\n\ndef plot_distributions(before, after):\n    # Your code here\n    pass",
        "solution": "import seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np\n\nbefore = np.random.normal(10, 2, 100)\nafter = np.random.normal(5, 2, 100)\n\ndef plot_distributions(before, after):\n    sns.histplot(before, kde=True, label='Before', alpha=0.5)\n    sns.histplot(after, kde=True, label='After', alpha=0.5)\n    plt.legend()\n    return plt.gca()",
        "test_cases": "ax = plot_distributions(before, after)\nassert ax is not None",
        "difficulty": "medium",
        "topic_tag": "seaborn"
    },
    {
        "question_type": "coding",
        "text": "Calculate a 95% confidence interval for a sample mean.",
        "starter_code": "from scipy import stats\nimport numpy as np\n\ndata = np.array([5.1, 5.5, 4.8, 5.2, 5.0, 5.3, 4.9, 5.4])\n\ndef confidence_interval(data, confidence=0.95):\n    # Return (lower, upper) bounds\n    pass",
        "solution": "from scipy import stats\nimport numpy as np\n\ndata = np.array([5.1, 5.5, 4.8, 5.2, 5.0, 5.3, 4.9, 5.4])\n\ndef confidence_interval(data, confidence=0.95):\n    n = len(data)\n    mean = np.mean(data)\n    se = stats.sem(data)\n    h = se * stats.t.ppf((1 + confidence) / 2, n - 1)\n    return mean - h, mean + h",
        "test_cases": "lower, upper = confidence_interval(data)\nassert lower < 5.15 < upper",
        "difficulty": "hard",
        "topic_tag": "scipy"
    },
    {
        "question_type": "coding",
        "text": "Test if the difference is significant at α=0.05 and return True/False.",
        "starter_code": "from scipy import stats\nimport numpy as np\n\ng1 = np.array([20, 22, 19, 21, 23])\ng2 = np.array([15, 17, 16, 14, 18])\n\ndef is_significant(g1, g2, alpha=0.05):\n    # Return True if significant, False otherwise\n    pass",
        "solution": "from scipy import stats\nimport numpy as np\n\ng1 = np.array([20, 22, 19, 21, 23])\ng2 = np.array([15, 17, 16, 14, 18])\n\ndef is_significant(g1, g2, alpha=0.05):\n    _, p = stats.ttest_ind(g1, g2)\n    return p < alpha",
        "test_cases": "result = is_significant(g1, g2)\nassert result == True",
        "difficulty": "medium",
        "topic_tag": "scipy"
    },
    {
        "question_type": "coding",
        "text": "Calculate the mean and standard deviation for before and after groups.",
        "starter_code": "import numpy as np\n\nbefore = np.array([10.5, 9.8, 11.2, 10.0, 9.5])\nafter = np.array([5.2, 4.8, 5.5, 5.0, 4.7])\n\ndef summary_stats(before, after):\n    # Return dict with means and stds\n    pass",
        "solution": "import numpy as np\n\nbefore = np.array([10.5, 9.8, 11.2, 10.0, 9.5])\nafter = np.array([5.2, 4.8, 5.5, 5.0, 4.7])\n\ndef summary_stats(before, after):\n    return {\n        'before_mean': np.mean(before),\n        'before_std': np.std(before),\n        'after_mean': np.mean(after),\n        'after_std': np.std(after)\n    }",
        "test_cases": "stats_out = summary_stats(before, after)\nassert stats_out['before_mean'] > stats_out['after_mean']",
        "difficulty": "easy",
        "topic_tag": "numpy"
    },
    {
        "question_type": "code-correction",
        "text": "The t-test returns an error. Fix the unequal array lengths.",
        "code": "from scipy import stats\ngroup1 = [1, 2, 3, 4, 5]\ngroup2 = [6, 7, 8]  # Different length\nstats.ttest_rel(group1, group2)",
        "options": [
            "Use ttest_ind for independent samples (different sizes allowed)",
            "Add more values to group2",
            "Remove values from group1",
            "Use a different test"
        ],
        "correct_index": 0,
        "difficulty": "medium",
        "topic_tag": "scipy",
        "explanation": "ttest_rel requires equal-length arrays (paired data). Use ttest_ind for independent samples."
    },
    {
        "question_type": "code-correction",
        "text": "The confidence interval calculation fails. Fix the import.",
        "code": "from scipy import sem, t\nse = sem(data)\nt_val = t.ppf(0.975, len(data) - 1)",
        "options": [
            "Import from scipy.stats: from scipy.stats import sem, t",
            "Use scipy.sem and scipy.t",
            "Use numpy instead",
            "Add stats. prefix"
        ],
        "correct_index": 0,
        "difficulty": "easy",
        "topic_tag": "scipy",
        "explanation": "sem and t are in scipy.stats, not directly in scipy."
    },
    {
        "question_type": "code-correction",
        "text": "The p-value interpretation is backwards. Fix the logic.",
        "code": "if p > 0.05:\n    print('Significant difference!')\nelse:\n    print('No significant difference')",
        "options": [
            "Swap the conditions: if p < 0.05: print('Significant')",
            "Use p <= 0.05",
            "Use p == 0.05",
            "Remove the else clause"
        ],
        "correct_index": 0,
        "difficulty": "easy",
        "topic_tag": "statistics",
        "explanation": "We reject H0 when p < α (significance level). p > 0.05 means fail to reject."
    }
]