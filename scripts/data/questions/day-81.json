[
    {
        "question_type": "mcq",
        "text": "What is the purpose of train_test_split in machine learning?",
        "options": [
            "To clean data",
            "To separate data for training and evaluation",
            "To normalize features",
            "To visualize results"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "sklearn",
        "explanation": "train_test_split divides data into training and test sets to evaluate model performance on unseen data."
    },
    {
        "question_type": "mcq",
        "text": "What does df.fillna(df.median()) do?",
        "options": [
            "Removes NaN rows",
            "Replaces NaN with column medians",
            "Calculates median only",
            "Drops median values"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "pandas",
        "explanation": "fillna() replaces missing values. Using df.median() fills with each column's median."
    },
    {
        "question_type": "mcq",
        "text": "Why do we use np.log1p() instead of np.log()?",
        "options": [
            "It's faster",
            "It handles zero values (log1p = log(1+x))",
            "It gives better precision",
            "It normalizes data"
        ],
        "correct_index": 1,
        "difficulty": "medium",
        "topic_tag": "numpy",
        "explanation": "log1p(x) = log(1+x), which avoids log(0) = -infinity when x = 0."
    },
    {
        "question_type": "mcq",
        "text": "What does df.corr() return?",
        "options": [
            "Mean values",
            "Correlation matrix",
            "Covariance matrix",
            "Standard deviations"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "pandas",
        "explanation": "corr() computes pairwise correlation between numeric columns."
    },
    {
        "question_type": "mcq",
        "text": "What is RMSE in model evaluation?",
        "options": [
            "R-squared error",
            "Root Mean Squared Error",
            "Relative Mean Standard Error",
            "Random Model Selection Error"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "sklearn",
        "explanation": "RMSE measures the average magnitude of prediction errors in the same units as the target."
    },
    {
        "question_type": "mcq",
        "text": "What should a residual plot look like for a good model?",
        "options": [
            "Clear pattern",
            "Random scatter around zero",
            "Increasing trend",
            "Decreasing trend"
        ],
        "correct_index": 1,
        "difficulty": "medium",
        "topic_tag": "regression",
        "explanation": "Random residuals indicate the model captures the relationship. Patterns suggest missing features."
    },
    {
        "question_type": "mcq",
        "text": "Which sklearn function performs cross-validation?",
        "options": [
            "cross_validate()",
            "split_validate()",
            "validate_model()",
            "kfold_test()"
        ],
        "correct_index": 0,
        "difficulty": "medium",
        "topic_tag": "sklearn",
        "explanation": "cross_validate() or cross_val_score() perform k-fold cross-validation."
    },
    {
        "question_type": "mcq",
        "text": "What is feature engineering?",
        "options": [
            "Removing features",
            "Creating new features from existing data",
            "Scaling features",
            "Selecting features"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "ml",
        "explanation": "Feature engineering creates new, more informative features to improve model performance."
    },
    {
        "question_type": "mcq",
        "text": "What does random_state parameter do in train_test_split?",
        "options": [
            "Generates random data",
            "Ensures reproducible splits",
            "Speeds up computation",
            "Adds randomness to model"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "sklearn",
        "explanation": "Setting random_state ensures the same split every time for reproducibility."
    },
    {
        "question_type": "mcq",
        "text": "When should you use StandardScaler?",
        "options": [
            "Always",
            "For tree-based models",
            "For distance-based models like KNN",
            "Never"
        ],
        "correct_index": 2,
        "difficulty": "medium",
        "topic_tag": "sklearn",
        "explanation": "Scaling is important for algorithms that use distances (KNN, SVM, neural networks)."
    },
    {
        "question_type": "mcq",
        "text": "What is overfitting?",
        "options": [
            "Model is too simple",
            "Model performs well on training but poorly on test data",
            "Model runs too fast",
            "Model has too few features"
        ],
        "correct_index": 1,
        "difficulty": "easy",
        "topic_tag": "ml",
        "explanation": "Overfitting occurs when a model memorizes training data but fails to generalize."
    },
    {
        "question_type": "mcq",
        "text": "Which metric is NOT affected by outliers?",
        "options": [
            "Mean Absolute Error",
            "Mean Squared Error",
            "R²",
            "RMSE"
        ],
        "correct_index": 0,
        "difficulty": "medium",
        "topic_tag": "sklearn",
        "explanation": "MAE uses absolute differences, which are less sensitive to outliers than squared errors."
    },
    {
        "question_type": "coding",
        "text": "Split data into 80% train and 20% test with random_state=42.",
        "starter_code": "from sklearn.model_selection import train_test_split\nimport numpy as np\n\nX = np.random.rand(100, 4)\ny = np.random.rand(100)\n\ndef split(X, y):\n    # Return X_train, X_test, y_train, y_test\n    pass",
        "solution": "from sklearn.model_selection import train_test_split\nimport numpy as np\n\nX = np.random.rand(100, 4)\ny = np.random.rand(100)\n\ndef split(X, y):\n    return train_test_split(X, y, test_size=0.2, random_state=42)",
        "test_cases": "X_train, X_test, y_train, y_test = split(X, y)\nassert len(X_train) == 80\nassert len(X_test) == 20",
        "difficulty": "easy",
        "topic_tag": "sklearn"
    },
    {
        "question_type": "coding",
        "text": "Fill missing values with column medians and return the DataFrame.",
        "starter_code": "import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame({'A': [1, np.nan, 3], 'B': [4, 5, np.nan]})\n\ndef fill_missing(df):\n    # Your code here\n    pass",
        "solution": "import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame({'A': [1, np.nan, 3], 'B': [4, 5, np.nan]})\n\ndef fill_missing(df):\n    return df.fillna(df.median())",
        "test_cases": "result = fill_missing(df.copy())\nassert result.isna().sum().sum() == 0\nassert result['A'].iloc[1] == 2.0",
        "difficulty": "easy",
        "topic_tag": "pandas"
    },
    {
        "question_type": "coding",
        "text": "Train a LinearRegression model and return the R² score on test data.",
        "starter_code": "from sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import r2_score\nimport numpy as np\n\nX = np.array([[1], [2], [3], [4], [5], [6], [7], [8], [9], [10]])\ny = np.array([2, 4, 6, 8, 10, 12, 14, 16, 18, 20])\n\ndef train_and_score(X, y):\n    # Your code here\n    pass",
        "solution": "from sklearn.linear_model import LinearRegression\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.metrics import r2_score\nimport numpy as np\n\nX = np.array([[1], [2], [3], [4], [5], [6], [7], [8], [9], [10]])\ny = np.array([2, 4, 6, 8, 10, 12, 14, 16, 18, 20])\n\ndef train_and_score(X, y):\n    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)\n    model = LinearRegression()\n    model.fit(X_train, y_train)\n    y_pred = model.predict(X_test)\n    return r2_score(y_test, y_pred)",
        "test_cases": "score = train_and_score(X, y)\nassert score > 0.99",
        "difficulty": "medium",
        "topic_tag": "sklearn"
    },
    {
        "question_type": "coding",
        "text": "Calculate RMSE for predictions vs actual values.",
        "starter_code": "from sklearn.metrics import mean_squared_error\nimport numpy as np\n\ny_true = np.array([3, 5, 7, 9])\ny_pred = np.array([2.5, 5.5, 6.5, 9.5])\n\ndef calculate_rmse(y_true, y_pred):\n    # Your code here\n    pass",
        "solution": "from sklearn.metrics import mean_squared_error\nimport numpy as np\n\ny_true = np.array([3, 5, 7, 9])\ny_pred = np.array([2.5, 5.5, 6.5, 9.5])\n\ndef calculate_rmse(y_true, y_pred):\n    return np.sqrt(mean_squared_error(y_true, y_pred))",
        "test_cases": "rmse = calculate_rmse(y_true, y_pred)\nassert 0 < rmse < 1",
        "difficulty": "easy",
        "topic_tag": "sklearn"
    },
    {
        "question_type": "coding",
        "text": "Find the top 3 features most correlated with the target column 'price'.",
        "starter_code": "import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame({\n    'size': [100, 200, 150, 300],\n    'rooms': [2, 4, 3, 5],\n    'age': [10, 5, 8, 2],\n    'price': [200, 400, 300, 600]\n})\n\ndef top_correlated(df, target='price', n=3):\n    # Return list of top n feature names\n    pass",
        "solution": "import pandas as pd\nimport numpy as np\n\ndf = pd.DataFrame({\n    'size': [100, 200, 150, 300],\n    'rooms': [2, 4, 3, 5],\n    'age': [10, 5, 8, 2],\n    'price': [200, 400, 300, 600]\n})\n\ndef top_correlated(df, target='price', n=3):\n    corr = df.corr()[target].drop(target).abs().sort_values(ascending=False)\n    return corr.head(n).index.tolist()",
        "test_cases": "result = top_correlated(df)\nassert len(result) == 3\nassert 'size' in result or 'rooms' in result",
        "difficulty": "medium",
        "topic_tag": "pandas"
    },
    {
        "question_type": "code-correction",
        "text": "The model.predict() fails with a shape error. Fix the input shape.",
        "code": "from sklearn.linear_model import LinearRegression\nmodel = LinearRegression()\nmodel.fit([[1], [2], [3]], [2, 4, 6])\nmodel.predict(4)",
        "options": [
            "Use 2D array: model.predict([[4]])",
            "Use model.predict(np.array(4))",
            "Use model.transform(4)",
            "Cast to float"
        ],
        "correct_index": 0,
        "difficulty": "easy",
        "topic_tag": "sklearn",
        "explanation": "predict() requires a 2D array like [[4]], not a scalar."
    },
    {
        "question_type": "code-correction",
        "text": "The train_test_split returns wrong proportions. Fix the parameter.",
        "code": "X_train, X_test, y_train, y_test = train_test_split(X, y, train_size=0.2)",
        "options": [
            "Use test_size=0.2 for 80/20 split",
            "Use split_ratio=0.8",
            "Use ratio=0.2",
            "Swap train_size to 0.8"
        ],
        "correct_index": 0,
        "difficulty": "easy",
        "topic_tag": "sklearn",
        "explanation": "train_size=0.2 gives 20% train. Use test_size=0.2 for 80% train, 20% test."
    },
    {
        "question_type": "code-correction",
        "text": "The correlation shows NaN for some columns. Fix the data type issue.",
        "code": "df = pd.DataFrame({'name': ['A', 'B'], 'value': [1, 2]})\ndf.corr()",
        "options": [
            "Select only numeric columns: df.select_dtypes(include='number').corr()",
            "Drop the name column first",
            "Convert name to numeric",
            "Use df.corr(numeric_only=True)"
        ],
        "correct_index": 3,
        "difficulty": "easy",
        "topic_tag": "pandas",
        "explanation": "corr() only works on numeric columns. Use numeric_only=True or select_dtypes()."
    }
]